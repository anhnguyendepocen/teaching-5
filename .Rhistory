theme_bw( base_size = 20  , base_family = 'serif' ) +
theme( axis.text.x = element_text(angle = 45, hjust= 1 )
, axis.title.y=element_text( vjust = 1.5 )
, panel.grid.major.y = element_line( color = 'black' , linetype = 2 )
, legend.key = element_blank()
, legend.key.width = unit( 2 , "cm" ) )
rm(list = ls())
pathData <- '/Users/dag/Dropbox/lehre/ws1516/grundlagenkurs/07/'
pathOut <- pathData
pathCode <- pathData
packs <- c('ggplot2', 'dplyr', 'scales', 'grid')
invisible(lapply(packs, library, character.only = TRUE))
load(file.path(pathData, 'satdem_22Apr14_prep.Rdata'))
summary(ds)
head(ds)
ds <- mutate(
ds,
eastwest = ifelse(country %in% c('Austria', 'Belgium',
'Cyprus (Republic)', 'Denmark', 'Finland', 'France',
'Germany', 'Greece', 'Ireland', 'Italy', 'Luxembourg',
'Malta', 'Portugal', 'Spain', 'Sweden',
'The Netherlands', 'UK'), 'west' , 'east'
)
)
ds %>%                              # yearly satisfaction eu
group_by( year ) %>%
mutate( mean = mean( sat.wgt , na.rm = TRUE )) %>%
select( year , mean ) %>%
unique( ) -> eu
ds %>%                  # yearly satisfaction western europe
filter( eastwest == 'west' ) %>%
group_by( year ) %>%
mutate( mean = mean( sat.wgt , na.rm = TRUE )) %>%
select( year , mean ) %>%
unique( ) -> west
ds %>%                  # yearly satisfaction eastern europe
filter( eastwest == 'east' ) %>%
group_by( year ) %>%
mutate( mean = mean( sat.wgt , na.rm = TRUE )) %>%
select( year , mean ) %>%
unique( ) -> east
ggplot() +
geom_bar( data = eu , aes( x = year , y = mean ) , color = 'white' , fill = 'grey' , stat="identity" ) +
geom_line( data = subset( west , year >= 2004 ) , aes( x = year , y = mean ) , linetype = 1 , size = 1 ) +
geom_line( data = east , aes( x = year , y = mean ) , linetype = 2 , size = 1 ) +
scale_y_continuous( limit = c( 0 , .8 )
, breaks = seq( 0 , .8 , .1 )
, labels = percent
, name = 'Satisfaction with Democracy' ) +
scale_x_continuous( breaks = seq( 1973 , 2013 , 2 )
, name = '' ) +
theme_bw( base_size = 20  , base_family = 'serif' ) +
theme( axis.text.x = element_text(angle = 45, hjust= 1 )
, axis.title.y=element_text( vjust = 1.5 )
, panel.grid.major.y = element_line( color = 'black' , linetype = 2 )
, legend.key = element_blank()
, legend.key.width = unit( 2 , "cm" ) )
summary(ds)
source('~/.active-rstudio-document', echo=TRUE)
head(ds)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
pathData <- '/Users/dag/Dropbox/lehre/ws1516/grundlagenkurs/07/'
pathOut <- pathCode <- pathData
rm(list = ls())
pathData <- '/Users/dag/Dropbox/lehre/ws1516/grundlagenkurs/07/'
pathOut <- pathCode <- pathData
load(file.path(pathData, 'satdem_22Apr14_prep.Rdata'))
invisible(lapply(packs, library, character.only = TRUE))
packs <- c('ggplot2', 'dplyr', 'scales', 'grid')
invisible(lapply(packs, library, character.only = TRUE))
with(ds, table(country, eastwest))
ds <- mutate(
ds,
eastwest = ifelse(country %in% c('Austria', 'Belgium',
'Cyprus (Republic)', 'Denmark', 'Finland', 'France',
'Germany', 'Greece', 'Ireland', 'Italy', 'Luxembourg',
'Malta', 'Portugal', 'Spain', 'Sweden',
'The Netherlands', 'UK'), 'west' , 'east'
)
)
with(ds, table(country, eastwest))
View(ds)
ggplot(data = ds, aes(x = year, y = sat.wgt)) +
stat_summary(fun.y = mean, geom = 'bar') +
facet_grid(~eastwest)
# Setup workspace ------------------------------------------
rm(list = ls())
pathData <- '/Users/dag/Dropbox/lehre/ws1516/grundlagenkurs/07/'
pathOut <- pathCode <- pathData
packs <- c('ggplot2', 'dplyr', 'scales', 'grid')
invisible(lapply(packs, library, character.only = TRUE))
rm(packs)
# load data ------------------------------------------------
load(file.path(pathData, 'satdem_22Apr14_prep.Rdata'))
ds <- mutate(
ds,
eastwest = ifelse(country %in% c('Austria', 'Belgium',
'Cyprus (Republic)', 'Denmark', 'Finland', 'France',
'Germany', 'Greece', 'Ireland', 'Italy', 'Luxembourg',
'Malta', 'Portugal', 'Spain', 'Sweden',
'The Netherlands', 'UK'), 'west' , 'east'
)
) %>%
mutate(
eastwest = factor(
eastwest,
levels = c('east', 'west'),
labels = 'Osteuropa', 'Westeuropa')
)
with(ds, table(country, eastwest))
# Setup workspace ------------------------------------------
rm(list = ls())
pathData <- '/Users/dag/Dropbox/lehre/ws1516/grundlagenkurs/07/'
pathOut <- pathCode <- pathData
packs <- c('ggplot2', 'dplyr', 'scales', 'grid')
invisible(lapply(packs, library, character.only = TRUE))
rm(packs)
# load data ------------------------------------------------
load(file.path(pathData, 'satdem_22Apr14_prep.Rdata'))
ds <- mutate(
ds,
eastwest = ifelse(country %in% c('Austria', 'Belgium',
'Cyprus (Republic)', 'Denmark', 'Finland', 'France',
'Germany', 'Greece', 'Ireland', 'Italy', 'Luxembourg',
'Malta', 'Portugal', 'Spain', 'Sweden',
'The Netherlands', 'UK'), 'west' , 'east'
)
) %>%
mutate(
eastwest = factor(
eastwest,
levels = c('east', 'west'),
labels = c('Osteuropa', 'Westeuropa')
)
with(ds, table(country, eastwest))
# Setup workspace ------------------------------------------
rm(list = ls())
pathData <- '/Users/dag/Dropbox/lehre/ws1516/grundlagenkurs/07/'
pathOut <- pathCode <- pathData
packs <- c('ggplot2', 'dplyr', 'scales', 'grid')
invisible(lapply(packs, library, character.only = TRUE))
rm(packs)
# load data ------------------------------------------------
load(file.path(pathData, 'satdem_22Apr14_prep.Rdata'))
ds <- mutate(
ds,
eastwest = ifelse(country %in% c('Austria', 'Belgium',
'Cyprus (Republic)', 'Denmark', 'Finland', 'France',
'Germany', 'Greece', 'Ireland', 'Italy', 'Luxembourg',
'Malta', 'Portugal', 'Spain', 'Sweden',
'The Netherlands', 'UK'), 'west' , 'east'
)
) %>%
mutate(
eastwest = factor(
eastwest,
levels = c('east', 'west'),
labels = c('Osteuropa', 'Westeuropa')
)
)
with(ds, table(country, eastwest))
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
summary(ds)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
scale_x_continuous(limits = c(1970, 2015), breaks = seq(1970, 2010, 10)) +
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
ggplot(data = ds, aes(x = year, y = sat.wgt)) +
geom_point() +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(limits = c(1970, 2015), breaks = seq(1970, 2010, 10)) +
labs(y = 'Zufriedenheit mit der Demokratie') +
facet_grid(~ country) +
theme_minimal() +
theme(
axis.title.x = element_blank(),
panel.border = element_rect(fill = 'transparent', colour = 'black', size = .1)
)
ggplot(data = ds, aes(x = year, y = sat.wgt)) +
geom_point() +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(limits = c(1970, 2015), breaks = seq(1970, 2010, 10)) +
labs(y = 'Zufriedenheit mit der Demokratie') +
facet_wrap(~ country) +
theme_minimal() +
theme(
axis.title.x = element_blank(),
panel.border = element_rect(fill = 'transparent', colour = 'black', size = .1)
)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
source('~/github/teaching/ws1516_grundkurs/07/satisfactionDemocracy.R', echo=TRUE)
warnings()
source('~/.active-rstudio-document', echo=TRUE)
View(ds)
# preamble ------------------------------------------------
rm(list = ls())
pathData <- '/Users/dag/Dropbox/lehre/ws1516/grundlagenkurs/07/'
pathOut <- pathCode <- pathData
packs <- c('ggplot2', 'dplyr', 'scales', 'grid')
invisible(lapply(packs, library, character.only = TRUE))
rm(packs)
# load data ------------------------------------------------
load(file.path(pathData, 'satdem_22Apr14_prep.Rdata'))
ds <- mutate(
ds,
eastwest = ifelse(country %in% c('Austria', 'Belgium',
'Cyprus (Republic)', 'Denmark', 'Finland', 'France',
'Germany', 'Greece', 'Ireland', 'Italy', 'Luxembourg',
'Malta', 'Portugal', 'Spain', 'Sweden',
'The Netherlands', 'UK'), 'west' , 'east'
)
) %>%
mutate(
eastwest = factor(
eastwest,
levels = c('east', 'west'),
labels = c('Osteuropa', 'Westeuropa')
)
) %>%
filter(country != 'Croatia')
table(ds$country)
source('~/.active-rstudio-document', echo=TRUE)
ggplot(data = ds, aes(x = year, y = sat.wgt)) +
geom_point() +
geom_smooth(method = 'lm', formula = y ~ poly(x, 3)) +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(limits = c(1970, 2015), breaks = seq(1970, 2010, 10)) +
labs(y = 'Zufriedenheit mit der Demokratie') +
facet_wrap(~ country) +
theme_minimal() +
theme(
axis.title.x = element_blank(),
panel.border = element_rect(fill = 'transparent', colour = 'black', size = .1)
)
ggplot(data = ds, aes(x = year, y = sat.wgt)) +
geom_point() +
geom_smooth(method = 'lm', formula = y ~ poly(x, 5)) +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(limits = c(1970, 2015), breaks = seq(1970, 2010, 10)) +
labs(y = 'Zufriedenheit mit der Demokratie') +
facet_wrap(~ country) +
theme_minimal() +
theme(
axis.title.x = element_blank(),
panel.border = element_rect(fill = 'transparent', colour = 'black', size = .1)
)
rm(list = ls())
pathData <- '/Users/dag/Dropbox/lehre/ws1516/grundlagenkurs/07/'
pathOut <- pathCode <- pathData
packs <- c('ggplot2', 'dplyr', 'scales', 'grid')
invisible(lapply(packs, library, character.only = TRUE))
rm(packs)
# load data ------------------------------------------------
load(file.path(pathData, 'satdem_22Apr14_prep.Rdata'))
ds <- mutate(
ds,
eastwest = ifelse(country %in% c('Austria', 'Belgium',
'Cyprus (Republic)', 'Denmark', 'Finland', 'France',
'Germany', 'Greece', 'Ireland', 'Italy', 'Luxembourg',
'Malta', 'Portugal', 'Spain', 'Sweden',
'The Netherlands', 'UK'), 'west' , 'east'
)
) %>%
mutate(
eastwest = factor(
eastwest,
levels = c('east', 'west'),
labels = c('Osteuropa', 'Westeuropa')
)
) %>%
filter(country != 'Croatia')
with(ds, table(country, eastwest))
ggplot(data = ds, aes(x = year, y = sat.wgt)) +
stat_summary(fun.data = mean_cl_normal, geom = 'linerange', size = .3) +
stat_summary(fun.y = mean, geom = 'point', size = 2) +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(limits = c(1970, 2015), breaks = seq(1970, 2010, 10)) +
labs(y = 'Zufriedenheit mit der Demokratie') +
facet_grid(~eastwest) +
theme_minimal() +
theme(
axis.title.x = element_blank(),
panel.border = element_rect(fill = 'transparent', colour = 'black', size = .1)
)
ggplot(data = ds, aes(x = year, y = sat.wgt)) +
geom_point() +
geom_smooth(method = 'lm', formula = y ~ poly(x, 3)) +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(
limits = c(1970, 2015), breaks = seq(1970, 2010, 10)
) +
labs(y = 'Zufriedenheit mit der Demokratie') +
facet_wrap(~ country) +
theme_minimal() +
theme(
axis.title.x = element_blank(),
panel.border = element_rect(
fill = 'transparent', colour = 'black', size = .1
)
)
ggplot(data = ds, aes(x = year, y = sat.wgt)) +
stat_summary(fun.data = mean_cl_normal, geom = 'linerange', size = .3) +
stat_summary(fun.y = mean, geom = 'point', size = 2) +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(limits = c(1970, 2015), breaks = seq(1970, 2010, 10)) +
labs(
y = 'Zufriedenheit mit der Demokratie\nLändermittelwerte'
) +
facet_grid(~eastwest) +
theme_minimal() +
theme(
axis.title.x = element_blank(),
panel.border = element_rect(fill = 'transparent', colour = 'black', size = .1)
)
ggplot(data = ds, aes(x = year, y = sat.wgt)) +
geom_point() +
geom_smooth(method = 'lm', formula = y ~ poly(x, 3)) +
scale_y_continuous(labels = scales::percent) +
scale_x_continuous(
limits = c(1970, 2015), breaks = seq(1970, 2010, 10)
) +
labs(y = 'Zufriedenheit mit der Demokratie\nLändermittelwerte') +
facet_wrap(~ country) +
theme_minimal() +
theme(
axis.title.x = element_blank(),
panel.border = element_rect(
fill = 'transparent', colour = 'black', size = .1
)
)
subset(ds, country %in% sample(unique(country, size = 15)))
subset(ds, country %in% sample(unique(country, size = 15))),
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
select.country <- with(ds, sample(unique(country, size = 5)))
with(ds, sample(unique(country, size = 5)))
with(ds, sample(unique(country), size = 5))
with(ds, sample(unique(country), size = 15))
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
library('DiagrammeR')
library('DiagrammeR', 'extrafont')
help(package = 'extrafont')
loadfonts()
library('DiagrammeR', 'extrafont')
library('DiagrammeR')
library('extrafont')
loadfonts()
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
help(package = 'DiagrammeR')
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document')
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
getwd()
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/github/teaching/ciee/wzbLogo.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
df <- subset(                                  ## data setup
base, select = c("country", "cow", "year", "physint")
)
df <- within(df,       ## compute mean physint and sort data
mean.physint <- ave(physint, cow,
FUN = function(x) {mean(x, na.rm = TRUE) }
)
)
df <- df[with(df, order(-mean.physint, country)), ]
df <- within(df,         # factor countries for sorting plot
f.country <- factor(country)
)
library('grid')        ## for unit() function in plot.margin
base_size <- 9                             ## set font size
p <- ggplot(df, aes(
x = year,
y = reorder(f.country, mean.physint, decrease = TRUE))
) +                                            ## add geoms
geom_tile(
data = df, aes(fill = factor(physint)), colour = "white",
size = .3
) +
scale_x_continuous(
breaks = seq(1995, 2007, 3), expand = c(0, 0)
) +
scale_y_discrete(expand = c(0, 0)) +
scale_fill_brewer(type = 'seq', palette = 9) +
theme_minimal(base_size = base_size) +             ## add theme
labs(x = "", y = "", fill = "PI Violations") +
guides(     ## remove white slashes from fill legend boxes
fill = guide_legend(override.aes = list(colour = NULL))
) +
theme(                      ## finishing touches to theme
text = element_text(family = 'sans'),
legend.position = c(.325, 1.04),
legend.direction = "horizontal",
legend.key = element_rect(colour = "white"),
legend.key.size = unit(.5, "lines"),
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
axis.text = element_text(size = .6*base_size, angle = 0),
plot.margin = unit(c(1, .1, 0, 0), "lines") ## crop margins
)
print(p)
rm(df, p)
?theme
source('~/.active-rstudio-document', echo=TRUE)
?scale_fill_discrete
?scale_fill_brewer
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
?guide_legend
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
31/39
23.5/39
39*0.65
39*0.68
39*0.65
update.packages(ask = FALSE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
